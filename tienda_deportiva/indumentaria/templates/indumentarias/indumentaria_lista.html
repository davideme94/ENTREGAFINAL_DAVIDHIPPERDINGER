{% extends "layout.html" %}

{% block title %}
    INDUMENTARIA
{% endblock %}

{% block content %}
    <section>
        <h1>INDUMENTARIA A LA VENTA</h1>
        {% for post in posts %}
            <article>
                <h2>{{ post.name }}</h2> 
                <img class="image" src="{{ post.image.url }}" alt="{{ post.name }}"/>
                <p>Talle: {{ post.talle }}</p> 
                <p>Precio: <span class="price">{{ post.precio }}</span> pesitos</p> 
                <p>Tipo: {{ post.tipo }}</p> 
                <p>Vendedor: {{ post.nombre_vendedor }}</p>
                <p>Contacto: {{ post.numero_contacto }}</p>

                <!-- Mostrar botones solo si el usuario es el propietario o un superusuario -->
                {% if user == post.usuario or user.is_superuser %}
                    <div class="action-buttons">
                        <!-- Botón para editar el artículo -->
                        <a href="{% url 'editar_camiseta' post.id %}">
                            <button>✏️ Editar</button>
                        </a>

                        <!-- Botón para eliminar el artículo -->
                        <form action="{% url 'eliminar_camiseta' post.id %}" method="POST" style="display:inline;">
                            {% csrf_token %}
                            <button type="submit" onclick="return confirm('¿Estás seguro de que deseas eliminar este artículo?');">
                                🗑️ Eliminar
                            </button>
                        </form>
                    </div>
                {% endif %}
            </article>
        {% endfor %}
    </section>
    
    <!-- Sección para agregar nuevos artículos (solo visible para usuarios autenticados) -->
    {% if user.is_authenticated %}
        <section class="button-container">
            <a href="/indumentaria/agregar-camiseta"><button>👕 AGREGAR CAMISETA 👕</button></a>
            <a href="/indumentaria/agregar-botin"><button>👢 AGREGAR BOTINES 👢</button></a>
            <a href="/indumentaria/agregar-shorts"><button>🩳 AGREGAR SHORTS 🩳</button></a>
        </section>
    {% endif %}

{% endblock %}
